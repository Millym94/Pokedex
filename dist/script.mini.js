const count=1292;let limit=100,loadMore=document.querySelector(".loadMoreButton"),pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("wrong data type")}function o(){return e}function n(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(e)})}function i(e){n(e).then(function(){!function e(t){let o=document.querySelector(".modal-body"),n=document.querySelector(".modal-title"),i=document.createElement("p");i.innerText="Abilities: ",t.abilities.forEach(function(e){let t=document.createElement("span");t.classList.add("pokemonAbility"),t.innerText=e.ability.name,i.appendChild(t)});let l=document.createElement("p");l.innerText="Types: ",t.types.forEach(function(e){let t=document.createElement("span");t.classList.add("pokemonTypes"),t.innerText=e.type.name,l.appendChild(t)});let r=document.createElement("h1");r.innerText=t.name;let s=document.createElement("img");s.src=t.imageUrl;let a=document.createElement("p");if(a.innerText=`Height: ${t.height}`,n.appendChild(r),o.appendChild(s),t.imageUrlBack){let c=document.createElement("img");c.src=t.imageUrlBack,o.appendChild(c)}o.appendChild(a),o.appendChild(i),o.appendChild(l)}(e)})}return{add:t,getAll:o,addListItem:function(e){let t=document.querySelector(".pokemon-list"),o=document.createElement("li");o.classList.add("list-group-item","col-12","col-sm-6","col-md-4","col-xl-3");let n=document.createElement("button");n.innerText=e.name,n.classList.add("btn",["color1Button","color2Button","color3Button","color4Button","color5Button","color6Button"][Math.floor(6*Math.random())],"btn-block"),n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#exampleModal"),o.appendChild(n),t.appendChild(o),!function e(t,o){o.addEventListener("click",function(){document.querySelector(".modal-body").innerHTML="",document.querySelector(".modal-title").innerHTML="",i(t)})}(e,n)},loadDetails:n,showDetails:i,loadList:function(e,o){return fetch(`https://pokeapi.co/api/v2/pokemon/?offset=${e}&limit=${o}`).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})}}}();function showNumberDisplayedPokemons(){let e=document.querySelector("#displayNumberPokemons"),t=document.querySelector("#showNumberInNavbar"),o=pokemonRepository.getAll().length;e.innerText=`${o} pokemons of 1292 shown`,t.innerText=`${o} pokemons of 1292 loaded`}pokemonRepository.loadList(0,limit).then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons()}),loadMore.addEventListener("click",function(){let e=pokemonRepository.getAll().length;pokemonRepository.loadList(e,e+limit<=1292?limit:1292-e).then(function(){pokemonRepository.getAll().slice(e).forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons(),1292===pokemonRepository.getAll().length&&loadMore.classList.add("invisible")})});let backToListButton=document.querySelector(".backToList"),loadMoreButton=document.querySelector(".loadMoreButton"),inputField=document.querySelector("input");function hideBackToListButton(){loadMoreButton.classList.contains("invisible")&&pokemonRepository.getAll().length<1292&&loadMoreButton.classList.remove("invisible"),backToListButton.classList.contains("invisible")||backToListButton.classList.add("invisible")}function showBackToListButton(){backToListButton.classList.contains("invisible")&&backToListButton.classList.remove("invisible"),loadMoreButton.classList.contains("invisible")&&loadMoreButton.classList.remove("invisible")}function searchPage(){}function searchPage(){let e=inputField.value.toUpperCase(),t=pokemonRepository.getAll().length;""!==e&&(document.querySelector(".pokemon-list").innerHTML="",document.querySelector("#displayNumberPokemons").innerText=`Searched within ${t} pokemons`,pokemonRepository.getAll().forEach(function(t){t.name.toUpperCase().indexOf(e)>=0&&pokemonRepository.addListItem(t)}),""===document.querySelector(".pokemon-list").innerHTML?document.querySelector(".displayInfoText").innerText="No Pokemon found":document.querySelector(".displayInfoText").innerText="Click on Pokemon name to show more details"),showBackToListButton()}document.querySelector(".searchButton").addEventListener("click",function(e){e.preventDefault(),searchPage()}),inputField.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),searchPage())}),backToListButton.addEventListener("click",function(){document.querySelector(".pokemon-list").innerHTML="",document.querySelector(".displayInfoText").innerText="Click on Pokemon name to show more details +++ Scroll down and click Load More to show more Pokemon",pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),showNumberDisplayedPokemons(),hideBackToListButton()});